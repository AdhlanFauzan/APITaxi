{% extends "documentation/base.html" %}
{% block styles %}
  {{super()}}
  <style>
 .menu-reference ul{
 height:auto;
 }
  </style>
 {% endblock %}
{% block documentationcontent %}
<h1>Reference Documentation</h1>

<h2 id="taxi">Taxi</h2>
<p>A taxi is the conjunction of a <a href="#vehicle">vehicle</a>, a <a href="#driver">driver</a> and a <a href="#ADS">license (aka ADS)</a>. It may be geolocated by one or several operators and hailed by a client.</p> 
<h3 id="taxi_object">Taxi Structure</h3>
<pre><code class="json">{
  "data": [
    {
     "vehicle": {
        "characteristics": null,
        "color": "orange",
        "constructor": "Toyota",
        "licence_plate": "WM-220-VP",
        "model": "Prius",
        "nb_seats": 4
      },
      "ads": {
        "insee": "75056",
        "numero": "20997"
      },
      "driver": {
        "departement": "75",
        "professional_licence": "091402"
      },
      "id": "9cf0ebfa-dd37-45c4-8a80-60db584535d8",
      "operator": "neotaxi",
      "status": "free",
      "position": {
         "lat": 48.82689259836185,
         "lon": 2.3419198393821716
       },
       "last_update": 1440169929,
       "crowfly_distance": 4.29
    }
  ]
}
</code></pre>

<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Key</td>
        <td>Value&nbsp;Type</td>
        <td>Description</td>
    </tr>
    </thead>
    <tr>
        <td><code>vehicle</code></td>
        <td><a href="#vehicle_object">vehicle</a></td>
        <td><em>A partial <a href="#vehicle_object">vehicle</a> with only the fields: <code>characteristics</code>, <code>color</code>, <code>constructor</code>, <code>licence_plate</code>, <code>model</code>, <code>nb_seats</code>. Warning: some of those fields might not be returned (or be returned with a <code>null</code> value) if they were not provided by the taxi operator.</em></td>
    </tr>
    <tr>
        <td><code>ads</code></td>
        <td><a href="#ads_object">ADS</a></td>
        <td><em>A partial <a href="#ads_object">ADS</a> object with only the fields: <code>insee</code>, <code>numero</code>.</em></td>
    </tr>
    <tr>
        <td><code>driver</code></td>
        <td><a href="#driver_object">driver</a></td>
        <td><em>A partial <a href="#driver_object">driver</a> object with only the fields: <code>departement</code>, <code>profesionnal_licence</code>.</em></td>
    </tr>
    <tr>
        <td><code>id</code></td>
        <td>string</td>
        <td><em>A long-lived identifier generated for this <code>vehicle</code>/<code>ads</code>/<code>driver</code> triplet by the <abbr title="Taxi Exchange Point">TXP</abbr>. This field should be omitted by operators when declaring a new taxi through a <code>POST</code> request; The newly generated <code>id</code> will be returned in the <code>taxi</code> object sent back as the response.</em></td>
    </tr>
    <tr>
         <td><code>operator</code></td>
         <td>string</td>
         <td><em>The name of the operator</em></td>
    </tr>
    <tr>
        <td><code>status</code></td>
        <td><a href="#status_taxi_enum">status</a></td>
        <td><em>Status of the taxi. The possible values are described in the <a href="#taxi_status">Taxi Status section</a></em></td>
    </tr>
    <tr>
         <td><code>position</code></td>
         <td>{lat,lon}</td>
         <td><em>The latitude and longitude of the taxi. Warning: those values are only returned in the response to a <a href="/doc/#!/taxis/get_taxis" target=_blank><code>GET</code> request on the taxis API</a> looking for taxis around a client. They will be nulled when returned in the response to a <a href="/doc/#!/taxis/get_taxi_id" target=_blank><code>GET</code> request on the taxisi/{taxi_id} API</a> looking for information on a specific taxi.</em></td>
    </tr>
    <tr>
        <td><code>last_update</code></td>
        <td>integer</td>
        <td><em>Timestamp of the last geolocation update of the taxi. The format is the usual <a href="https://en.wikipedia.org/wiki/Unix_time" target="_blank">Unix time</a> (IEEE P1003.1 POSIX) and as such is UTC (no timezone).</em></td>
    </tr>
    <tr>
         <td><code>crowfly_distance</code></td>
         <td>number</td>
         <td><em>Distance between the location of the client and the location of the taxi. This value will only be returned in the response to a <a href="/doc/#!/taxis/get_taxis" target=_blank><code>GET</code> request on the taxis API</a> looking for taxis around a client.  It will be nulled when returned in the response to a <a href="/doc/#!/taxis/get_taxi_id" target=_blank><code>GET</code> request on the taxisi/{taxi_id}   API</a> looking for
                 information on a specific taxi. When not <code>null</code>, the number is in JavaScript double precision floating-point format, with decimal separator ".". It represents the number of km between the client and the taxi measured in a
                 straight line</em></td>
     </tr>
</table>

<h3 id="taxi_status">Taxi Status</h3>
<p>This table describes the different values the taxi <code>status</code> can take</p>
<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Value</td>
        <td>Description</td>
    </tr>
    </thead>
    <tr>
        <td><code>free</code></td>
        <td><em>The taxi can be hailed</em></td>
    </tr>
    <tr>
        <td><code>answering</code></td>
        <td><em>The taxi is currently answering to a hail</em></td>
    </tr>
    <tr>
        <td><code>oncoming</code></td>
        <td><em>The taxi is on its way to meet a customer</em></td>
    </tr>
    <tr>
        <td><code>occupied</code></td>
        <td><em>The taxi has a customer on board</em></td>
    </tr>
    <tr>
        <td><code>off</code></td>
        <td><em>The taxi is not logged in</em></td>
    </tr>
</table>
<!-- a name="taxi_post_reponses"><h3>Error codes on a POST /taxis/</h3></a>
    TODO (in Swagger ?) -->

<h2 id="ads">ADS</h2>

<h3 id="ads_object">Structure</h3>
<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Key</td>
        <td>Value Type</td>
        <td>Description</td>
    </tr>
    </thead>
    <tr>
        <td><code>category</code></td>
        <td>string</td>
        <td><em></em></td>
    </tr>
    <tr>
        <td><code>insee</code></td>
        <td>string</td>
        <td><em>INSEE code of the entity of which the ADS belongs to.</em></td>
    </tr>
    <tr>
        <td><code>doublage</code></td>
        <td>boolean</td>
        <td><em>Can this ADS be used by two drivers</em></td>
    </tr>
    <tr>
        <td><code>numero</code></td>
        <td>string</td>
        <td><em>identifier of the ADS</em></td>
    </tr>
    <tr>
        <td><code>owner_name</code></td>
        <td>string</td>
        <td><em>Name of the owner</em></td>
    </tr>
    <tr>
        <td><code>owner_type</code></td>
        <td>string</td>
        <td><em>Can be company or individual</em></td>
    </tr>
    <tr>
        <td><code>vehicle_id</code></td>
        <td></td>
        <td><em></em></td>
    </tr>
</table>

<h2 id="driver">Driver</h2>

<h3 id="driver_object">Structure</h3>
<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Key</td>
        <td>Value&nbsp;Type</td>
        <td>Description</td>
    </tr>
    </thead>
    <tr>
        <td><code>last_name</code></td>
        <td>string</td>
        <td><em>Last name of the driver</em></td>
    </tr>
    <tr>
        <td><code>first_name</code></td>
        <td>string</td>
        <td><em>Last name of the driver</em></td>
    </tr>
    <tr>
        <td><code>birth_date</code></td>
        <td>string, format: YYYY-MM-DD</td>
        <td><em>Birth date of the driver</em></td>
    </tr>
    <tr>
        <td><code>profesionnal_licence</code></td>
        <td>string</td>
        <td><em>Professional licence identifier of the driver</em></td>
    </tr>
    <tr>
        <td><code>departement</code></td>
        <td><a href="#department_object">department</a> object</td>
        <td><em></em></td>
    </tr>
</table>

<h2 id="vehicle">Vehicle</h2>

<h3 id="vehicle_characteristics">Characteristics</h3>
<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Value</td>
        <td>Desription</td>
    </tr>
    </thead>
    <tr>
        <td><code>special_need_vehicle</code></td>
        <td><em>This vehicle accepts people with special needs</em></td>
    </tr>
    <tr>
        <td><code>every_destination</code></td>
        <td><em>This taxi accepts to go everywhere</em></td>
    </tr>
    <tr>
        <td><code>gps</code></td>
        <td><em>This taxi has a GPS</em></td>
    </tr>
    <tr>
        <td><code>eletronic_tool</code></td>
        <td><em>This vehicle has an eletronic tool device</em></td>
    </tr>
    <tr>
        <td><code>air_con</code></td>
        <td><em>This vehicle has air conditionnedd</em></td>
    </tr>
    <tr>
        <td><code>pet_accepted</code></td>
        <td><em>This vehicle accepts pets</em></td>
    </tr>
    <tr>
        <td><code>bike_accepted</code></td>
        <td><em>This vehicle accepts bikes</em></td>
    </tr>
    <tr>
        <td><code>baby_seat</code></td>
        <td><em>This vehicle has a baby seat</em></td>
    </tr>
    <tr>
        <td><code>wifi</code></td>
        <td><em>This vehicle has wifi aboard</em></td>
    </tr>
    <tr>
        <td><code>tablet</code></td>
        <td><em>This vehicle has a tablet which can be used by the customer</em></td>
    </tr>
    <tr>
        <td><code>dvd_player</code></td>
        <td><em>This vehicle has a dvd player which can be used by the customer</em></td>
    </tr>
    <tr>
        <td><code>fresh_drink</code></td>
        <td><em>This vehicle offers a fresh drink to the client</em></td>
    </tr>
    <tr>
        <td><code>amex_accepted</code></td>
        <td><em>This vehicle accepts american express card</em></td>
    </tr>
    <tr>
        <td><code>bank_check_accepted</code></td>
        <td><em>This vehicle accepts bank checks</em></td>
    </tr>
    <tr>
        <td><code>nfc_cc_accepted</code></td>
        <td><em>This vehicle accepts nfc credit card payments</em></td>
    </tr>
    <tr>
        <td><code>credit_card_accepted</code></td>
        <td><em>This vehicle accepts credit card payments</em></td>
    </tr>
    <tr>
        <td><code>luxury</code></td>
        <td><em>This is a luxury vehicle</em></td>
    </tr>
</table>



<h2 id="hail">Hail</h2>

<h3 id="hail_object">Hail Structure</h3>
<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Key</td>
        <td>Value&nbsp;Type</td>
        <td>Description</td>
    </tr>
    </thead>
    <tr>
        <td><code>operateur</code></td>
        <td>string</td>
        <td><em>identifier of the operateur</em></td>
    </tr>
    <tr>
        <td><code>customer_id</code></td>
        <td>string</td>
        <td><em>identifier of the customer</em></td>
    </tr>
    <tr>
        <td><code>customer_lon</code></td>
        <td>float</td>
        <td><em>Longitude of the position of the customer</em></td>
    </tr>
    <tr>
        <td><code>customer_lat</code></td>
        <td>float</td>
        <td><em>Latitude of the position of the customer</em></td>
    </tr>
    <tr>
        <td><code>customer_address</code></td>
        <td>string</td>
        <td><em>Address of the position of the customer</em></td>
    </tr>
    <tr>
        <td><code>taxi_id</code></td>
        <td>string</td>
        <td><em>Identifier of the taxi</em></td>
    </tr>
    <tr>
        <td><code>status</code></td>
        <td>string</td>
        <td><em>status of the hail. All possible values are described <a href="#hail_status">here</a></em></td>
    </tr>
</table>
<h3 id="hail_status">Hail status</h3>
This section describes the different values a hail status can take.
<table class="pure-table pure-table-bordered pure-table-horizontal pure-table-striped">
    <thead>
    <tr>
        <td>Value</td>
        <td>Description</td>
    </tr>
    </thead>
    <tr>
        <td><code>emitted</code></td>
        <td><em>The first status of hail</em></td>
    </tr>
    <tr>
        <td><code>received</code></td>
        <td><em>The hail is received by the ODT</em></td>
    </tr>
    <tr>
        <td><code>sent_to_operator</code></td>
        <td><em>The hail has been sent to the operator</em></td>
    </tr>
    <tr>
        <td><code>received_by_operator</code></td>
        <td><em>We know the operator received the hail</em></td>
    </tr>
    <tr>
        <td><code>received_by_taxi</code></td>
        <td><em>The hail has been received by the taxi</em></td>
    </tr>
    <tr>
        <td><code>accepted_by_taxi</code></td>
        <td><em>The hail has been accepted by the taxi</em></td>
    </tr>
    <tr>
        <td><code>declined_by_taxi</code></td>
        <td><em>The hail has been declined by the taxi</em></td>
    </tr>
    <tr>
        <td><code>incident_customer</code></td>
        <td><em></em></td>
    </tr>
    <tr>
        <td><code>incident_taxi</code></td>
        <td><em></em></td>
    </tr>
    <tr>
        <td><code>timeout_customer</code></td>
        <td><em></em></td>
    </tr>
    <tr>
        <td><code>timeout_taxi</code></td>
        <td><em></em></td>
    </tr>
    <tr>
        <td><code>failure</code></td>
        <td><em></em></td>
    </tr>
</table>
<br>
<img src="/static/images/enums_hails.png">

{% endblock %}
