machine:
    python:
        version: 2.7.9
    services:
        - postgresql
    pre:
        - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 10
        - sudo apt-get install autoconf-archive automake-1.14 autoconf2.59 build-essential check libspatialindex-dev

checkout:
    pre:
	- git clone https://github.com/openmaraude/faker
	- git clone https://github.com/openmaraude/minimal_operateur_server
    post:
	- cd faker && go build && cd ..

dependencies:
    pre:
        - git clone https://github.com/openmaraude/GeoTaxi
        - cd GeoTaxi/src && mkdir obj && make && cd ../..
        - ./install_redis.sh
        - ./install_yajl.sh
        - ./install_krmt.sh
        - wget https://bootstrap.pypa.io/get-pip.py && python get-pip.py
    cache_directories:
        - redis
        - yajl
        - krmt
